---
layout: post
title: 'Mysql 对大表执行扩列和加索引'
tags: [code]
---

### Mysql 对大表执行扩列和加索引


#### 背景

生产上有一个表的总数已经大于 3000W 条。在预发环境测试增加列和索引脚本的时候发现，执行速度特别慢。
最后使用了在线 DDL 的功能由原来的几个小时缩小到了半个小时。

#### 解决方法

```mysql
ALTER TABLE t1 ADD COLUMN x INT, ALGORITHM=INPLACE, LOCK=NONE;
```

#### 参考链接

[在线 DDL](https://dev.mysql.com/doc/refman/5.6/en/innodb-online-ddl-performance.html)









